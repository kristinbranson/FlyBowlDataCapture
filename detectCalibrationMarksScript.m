expDirs = {...
  'E:\Data\FlyBowl\Test1\pBDPGAL4U_TrpA_Rig1Plate01BowlA_20101013T130313'
  'E:\Data\FlyBowl\Test1\pBDPGAL4U_TrpA_Rig1Plate01BowlA_20101013T132910'
  'E:\Data\FlyBowl\Test1\pBDPGAL4U_TrpA_Rig1Plate01BowlB_20101013T130303'
  'E:\Data\FlyBowl\Test1\pBDPGAL4U_TrpA_Rig1Plate01BowlB_20101013T132915'
  'E:\Data\FlyBowl\Test1\pBDPGAL4U_TrpA_Rig1Plate01BowlC_20101013T130304'
  'E:\Data\FlyBowl\Test1\pBDPGAL4U_TrpA_Rig1Plate01BowlC_20101013T132910'
  'E:\Data\FlyBowl\Test1\pBDPGAL4U_TrpA_Rig1Plate01BowlD_20101013T130257'
  'E:\Data\FlyBowl\Test1\pBDPGAL4U_TrpA_Rig1Plate01BowlD_20101013T132915'
  'E:\Data\FlyBowl\Test1\GMR_12E07_AE_01_TrpA_Rig1Plate01BowlA_20101013T095913'
  'E:\Data\FlyBowl\Test1\GMR_14F09_AE_01_TrpA_Rig1Plate01BowlB_20101012T152226'
  'E:\Data\FlyBowl\Test1\GMR_14G08_AE_01_TrpA_Rig1Plate01BowlA_20101013T151418'
  'E:\Data\FlyBowl\Test1\GMR_14H01_AE_01_TrpA_Rig1Plate01BowlB_20101013T144844'
  'E:\Data\FlyBowl\Test1\GMR_14H07_AE_01_TrpA_Rig1Plate01BowlC_20101013T142226'
  'E:\Data\FlyBowl\Test1\GMR_15A04_AE_01_TrpA_Rig1Plate01BowlD_20101013T135558'
  'E:\Data\FlyBowl\Test1\GMR_18C11_AE_01_TrpA_Rig1Plate01BowlC_20101013T102434'
  'E:\Data\FlyBowl\Test1\GMR_23E04_AE_01_TrpA_Rig1Plate01BowlD_20101013T105011'...
  };
movieFileStr = 'movie.ufmf';
annFileStr = 'movie.ufmf.ann';
params = {...
  'bkgdNSampleFrames',10,...
  'method','normcorr',...
  'crossFilterRadius',9,...
  'nRotations',20,...
  'minCrossFeatureStrength',.92,...
  'minFeatureStrengthHigh',30,...
  'minDistCenterFrac',.5,...
  'maxDistCenterFrac',.57,...
  'maxDistCornerFrac_BowlLabel',.2,...
  'nCalibrationPoints',8,...
  'featureRadius',25,...
  'maxDThetaMate',10*pi/180,...
  'pairDist_mm',133,...
  'bowlMarkerPairTheta_true',-3*pi/4,...
  'maxDThetaBowlMarkerPair',pi/12,...
  'markerPairAngle_true',pi/6,...
  'debug',true,...
  'nr',1024,'nc',1024};

%%

clear calibrationData;

for i = 1:length(expDirs),
  movieName = fullfile(expDirs{i},movieFileStr);
  annName = fullfile(expDirs{i},annFileStr);
  if ~exist(annName,'file'),
    fprintf('Ann file %s does not exist, skipping.\n',annName);
    continue;
  end
  calibrationData(i) = detectCalibrationMarks('annName',annName,params{:});
  input(strrep(sprintf('movie %s: ',movieName),'\','\\'));
end